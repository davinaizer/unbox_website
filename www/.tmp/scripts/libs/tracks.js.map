{"version":3,"sources":["../../../app/scripts/libs/tracks.js"],"names":[],"mappings":"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","file":"tracks.js","sourcesContent":["/**\n * @fileoverview Text Tracks\n * Text tracks are tracks of timed text events.\n * Captions - text displayed over the video for the hearing impared\n * Subtitles - text displayed over the video for those who don't understand langauge in the video\n * Chapters - text displayed in a menu allowing the user to jump to particular points (chapters) in the video\n * Descriptions (not supported yet) - audio descriptions that are read back to the user by a screen reading device\n */\n\n// Player Additions - Functions add to the player object for easier access to tracks\n\n/**\n * List of associated text tracks\n * @type {Array}\n * @private\n */\nvjs.Player.prototype.textTracks_;\n\n/**\n * Get an array of associated text tracks. captions, subtitles, chapters, descriptions\n * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks\n * @return {Array}           Array of track objects\n */\nvjs.Player.prototype.textTracks = function(){\n  this.textTracks_ = this.textTracks_ || [];\n  return this.textTracks_;\n};\n\n/**\n * Add a text track\n * In addition to the W3C settings we allow adding additional info through options.\n * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack\n * @param {String}  kind        Captions, subtitles, chapters, descriptions, or metadata\n * @param {String=} label       Optional label\n * @param {String=} language    Optional language\n * @param {Object=} options     Additional track options, like src\n */\nvjs.Player.prototype.addTextTrack = function(kind, label, language, options){\n  var tracks = this.textTracks_ = this.textTracks_ || [];\n  options = options || {};\n\n  options['kind'] = kind;\n  options['label'] = label;\n  options['language'] = language;\n\n  // HTML5 Spec says default to subtitles.\n  // Uppercase first letter to match class names\n  var Kind = vjs.capitalize(kind || 'subtitles');\n\n  // Create correct texttrack class. CaptionsTrack, etc.\n  var track = new window['videojs'][Kind + 'Track'](this, options);\n\n  tracks.push(track);\n\n  // If track.dflt() is set, start showing immediately\n  // TODO: Add a process to deterime the best track to show for the specific kind\n  // Incase there are mulitple defaulted tracks of the same kind\n  // Or the user has a set preference of a specific language that should override the default\n  // if (track.dflt()) {\n  //   this.ready(vjs.bind(track, track.show));\n  // }\n\n  return track;\n};\n\n/**\n * Add an array of text tracks. captions, subtitles, chapters, descriptions\n * Track objects will be stored in the player.textTracks() array\n * @param {Array} trackList Array of track elements or objects (fake track elements)\n */\nvjs.Player.prototype.addTextTracks = function(trackList){\n  var trackObj;\n\n  for (var i = 0; i < trackList.length; i++) {\n    trackObj = trackList[i];\n    this.addTextTrack(trackObj['kind'], trackObj['label'], trackObj['language'], trackObj);\n  }\n\n  return this;\n};\n\n// Show a text track\n// disableSameKind: disable all other tracks of the same kind. Value should be a track kind (captions, etc.)\nvjs.Player.prototype.showTextTrack = function(id, disableSameKind){\n  var tracks = this.textTracks_,\n      i = 0,\n      j = tracks.length,\n      track, showTrack, kind;\n\n  // Find Track with same ID\n  for (;i<j;i++) {\n    track = tracks[i];\n    if (track.id() === id) {\n      track.show();\n      showTrack = track;\n\n    // Disable tracks of the same kind\n    } else if (disableSameKind && track.kind() == disableSameKind && track.mode() > 0) {\n      track.disable();\n    }\n  }\n\n  // Get track kind from shown track or disableSameKind\n  kind = (showTrack) ? showTrack.kind() : ((disableSameKind) ? disableSameKind : false);\n\n  // Trigger trackchange event, captionstrackchange, subtitlestrackchange, etc.\n  if (kind) {\n    this.trigger(kind+'trackchange');\n  }\n\n  return this;\n};\n\n/**\n * Track Class\n * Contains track methods for loading, showing, parsing cues of tracks\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.TextTrack = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    // Apply track info to track object\n    // Options will often be a track element\n\n    // Build ID if one doesn't exist\n    this.id_ = options['id'] || ('vjs_' + options['kind'] + '_' + options['language'] + '_' + vjs.guid++);\n    this.src_ = options['src'];\n    // 'default' is a reserved keyword in js so we use an abbreviated version\n    this.dflt_ = options['default'] || options['dflt'];\n    this.title_ = options['title'];\n    this.language_ = options['srclang'];\n    this.label_ = options['label'];\n    this.cues_ = [];\n    this.activeCues_ = [];\n    this.readyState_ = 0;\n    this.mode_ = 0;\n\n    this.player_.on('fullscreenchange', vjs.bind(this, this.adjustFontSize));\n  }\n});\n\n/**\n * Track kind value. Captions, subtitles, etc.\n * @private\n */\nvjs.TextTrack.prototype.kind_;\n\n/**\n * Get the track kind value\n * @return {String}\n */\nvjs.TextTrack.prototype.kind = function(){\n  return this.kind_;\n};\n\n/**\n * Track src value\n * @private\n */\nvjs.TextTrack.prototype.src_;\n\n/**\n * Get the track src value\n * @return {String}\n */\nvjs.TextTrack.prototype.src = function(){\n  return this.src_;\n};\n\n/**\n * Track default value\n * If default is used, subtitles/captions to start showing\n * @private\n */\nvjs.TextTrack.prototype.dflt_;\n\n/**\n * Get the track default value\n * 'default' is a reserved keyword\n * @return {Boolean}\n */\nvjs.TextTrack.prototype.dflt = function(){\n  return this.dflt_;\n};\n\n/**\n * Track title value\n * @private\n */\nvjs.TextTrack.prototype.title_;\n\n/**\n * Get the track title value\n * @return {String}\n */\nvjs.TextTrack.prototype.title = function(){\n  return this.title_;\n};\n\n/**\n * Language - two letter string to represent track language, e.g. 'en' for English\n * Spec def: readonly attribute DOMString language;\n * @private\n */\nvjs.TextTrack.prototype.language_;\n\n/**\n * Get the track language value\n * @return {String}\n */\nvjs.TextTrack.prototype.language = function(){\n  return this.language_;\n};\n\n/**\n * Track label e.g. 'English'\n * Spec def: readonly attribute DOMString label;\n * @private\n */\nvjs.TextTrack.prototype.label_;\n\n/**\n * Get the track label value\n * @return {String}\n */\nvjs.TextTrack.prototype.label = function(){\n  return this.label_;\n};\n\n/**\n * All cues of the track. Cues have a startTime, endTime, text, and other properties.\n * Spec def: readonly attribute TextTrackCueList cues;\n * @private\n */\nvjs.TextTrack.prototype.cues_;\n\n/**\n * Get the track cues\n * @return {Array}\n */\nvjs.TextTrack.prototype.cues = function(){\n  return this.cues_;\n};\n\n/**\n * ActiveCues is all cues that are currently showing\n * Spec def: readonly attribute TextTrackCueList activeCues;\n * @private\n */\nvjs.TextTrack.prototype.activeCues_;\n\n/**\n * Get the track active cues\n * @return {Array}\n */\nvjs.TextTrack.prototype.activeCues = function(){\n  return this.activeCues_;\n};\n\n/**\n * ReadyState describes if the text file has been loaded\n * const unsigned short NONE = 0;\n * const unsigned short LOADING = 1;\n * const unsigned short LOADED = 2;\n * const unsigned short ERROR = 3;\n * readonly attribute unsigned short readyState;\n * @private\n */\nvjs.TextTrack.prototype.readyState_;\n\n/**\n * Get the track readyState\n * @return {Number}\n */\nvjs.TextTrack.prototype.readyState = function(){\n  return this.readyState_;\n};\n\n/**\n * Mode describes if the track is showing, hidden, or disabled\n * const unsigned short OFF = 0;\n * const unsigned short HIDDEN = 1; (still triggering cuechange events, but not visible)\n * const unsigned short SHOWING = 2;\n * attribute unsigned short mode;\n * @private\n */\nvjs.TextTrack.prototype.mode_;\n\n/**\n * Get the track mode\n * @return {Number}\n */\nvjs.TextTrack.prototype.mode = function(){\n  return this.mode_;\n};\n\n/**\n * Change the font size of the text track to make it larger when playing in fullscreen mode\n * and restore it to its normal size when not in fullscreen mode.\n */\nvjs.TextTrack.prototype.adjustFontSize = function(){\n    if (this.player_.isFullScreen) {\n        // Scale the font by the same factor as increasing the video width to the full screen window width.\n        // Additionally, multiply that factor by 1.4, which is the default font size for\n        // the caption track (from the CSS)\n        this.el_.style.fontSize = screen.width / this.player_.width() * 1.4 * 100 + '%';\n    } else {\n        // Change the font size of the text track back to its original non-fullscreen size\n        this.el_.style.fontSize = '';\n    }\n};\n\n/**\n * Create basic div to hold cue text\n * @return {Element}\n */\nvjs.TextTrack.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-' + this.kind_ + ' vjs-text-track'\n  });\n};\n\n/**\n * Show: Mode Showing (2)\n * Indicates that the text track is active. If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.\n * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.\n * In addition, for text tracks whose kind is subtitles or captions, the cues are being displayed over the video as appropriate;\n * for text tracks whose kind is descriptions, the user agent is making the cues available to the user in a non-visual fashion;\n * and for text tracks whose kind is chapters, the user agent is making available to the user a mechanism by which the user can navigate to any point in the media resource by selecting a cue.\n * The showing by default state is used in conjunction with the default attribute on track elements to indicate that the text track was enabled due to that attribute.\n * This allows the user agent to override the state if a later track is discovered that is more appropriate per the user's preferences.\n */\nvjs.TextTrack.prototype.show = function(){\n  this.activate();\n\n  this.mode_ = 2;\n\n  // Show element.\n  vjs.Component.prototype.show.call(this);\n};\n\n/**\n * Hide: Mode Hidden (1)\n * Indicates that the text track is active, but that the user agent is not actively displaying the cues.\n * If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.\n * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.\n */\nvjs.TextTrack.prototype.hide = function(){\n  // When hidden, cues are still triggered. Disable to stop triggering.\n  this.activate();\n\n  this.mode_ = 1;\n\n  // Hide element.\n  vjs.Component.prototype.hide.call(this);\n};\n\n/**\n * Disable: Mode Off/Disable (0)\n * Indicates that the text track is not active. Other than for the purposes of exposing the track in the DOM, the user agent is ignoring the text track.\n * No cues are active, no events are fired, and the user agent will not attempt to obtain the track's cues.\n */\nvjs.TextTrack.prototype.disable = function(){\n  // If showing, hide.\n  if (this.mode_ == 2) { this.hide(); }\n\n  // Stop triggering cues\n  this.deactivate();\n\n  // Switch Mode to Off\n  this.mode_ = 0;\n};\n\n/**\n * Turn on cue tracking. Tracks that are showing OR hidden are active.\n */\nvjs.TextTrack.prototype.activate = function(){\n  // Load text file if it hasn't been yet.\n  if (this.readyState_ === 0) { this.load(); }\n\n  // Only activate if not already active.\n  if (this.mode_ === 0) {\n    // Update current cue on timeupdate\n    // Using unique ID for bind function so other tracks don't remove listener\n    this.player_.on('timeupdate', vjs.bind(this, this.update, this.id_));\n\n    // Reset cue time on media end\n    this.player_.on('ended', vjs.bind(this, this.reset, this.id_));\n\n    // Add to display\n    if (this.kind_ === 'captions' || this.kind_ === 'subtitles') {\n      this.player_.getChild('textTrackDisplay').addChild(this);\n    }\n  }\n};\n\n/**\n * Turn off cue tracking.\n */\nvjs.TextTrack.prototype.deactivate = function(){\n  // Using unique ID for bind function so other tracks don't remove listener\n  this.player_.off('timeupdate', vjs.bind(this, this.update, this.id_));\n  this.player_.off('ended', vjs.bind(this, this.reset, this.id_));\n  this.reset(); // Reset\n\n  // Remove from display\n  this.player_.getChild('textTrackDisplay').removeChild(this);\n};\n\n// A readiness state\n// One of the following:\n//\n// Not loaded\n// Indicates that the text track is known to exist (e.g. it has been declared with a track element), but its cues have not been obtained.\n//\n// Loading\n// Indicates that the text track is loading and there have been no fatal errors encountered so far. Further cues might still be added to the track.\n//\n// Loaded\n// Indicates that the text track has been loaded with no fatal errors. No new cues will be added to the track except if the text track corresponds to a MutableTextTrack object.\n//\n// Failed to load\n// Indicates that the text track was enabled, but when the user agent attempted to obtain it, this failed in some way (e.g. URL could not be resolved, network error, unknown text track format). Some or all of the cues are likely missing and will not be obtained.\nvjs.TextTrack.prototype.load = function(){\n\n  // Only load if not loaded yet.\n  if (this.readyState_ === 0) {\n    this.readyState_ = 1;\n    vjs.get(this.src_, vjs.bind(this, this.parseCues), vjs.bind(this, this.onError));\n  }\n\n};\n\nvjs.TextTrack.prototype.onError = function(err){\n  this.error = err;\n  this.readyState_ = 3;\n  this.trigger('error');\n};\n\n// Parse the WebVTT text format for cue times.\n// TODO: Separate parser into own class so alternative timed text formats can be used. (TTML, DFXP)\nvjs.TextTrack.prototype.parseCues = function(srcContent) {\n  var cue, time, text,\n      lines = srcContent.split('\\n'),\n      line = '', id;\n\n  for (var i=1, j=lines.length; i<j; i++) {\n    // Line 0 should be 'WEBVTT', so skipping i=0\n\n    line = vjs.trim(lines[i]); // Trim whitespace and linebreaks\n\n    if (line) { // Loop until a line with content\n\n      // First line could be an optional cue ID\n      // Check if line has the time separator\n      if (line.indexOf('-->') == -1) {\n        id = line;\n        // Advance to next line for timing.\n        line = vjs.trim(lines[++i]);\n      } else {\n        id = this.cues_.length;\n      }\n\n      // First line - Number\n      cue = {\n        id: id, // Cue Number\n        index: this.cues_.length // Position in Array\n      };\n\n      // Timing line\n      time = line.split(' --> ');\n      cue.startTime = this.parseCueTime(time[0]);\n      cue.endTime = this.parseCueTime(time[1]);\n\n      // Additional lines - Cue Text\n      text = [];\n\n      // Loop until a blank line or end of lines\n      // Assumeing trim('') returns false for blank lines\n      while (lines[++i] && (line = vjs.trim(lines[i]))) {\n        text.push(line);\n      }\n\n      cue.text = text.join('<br/>');\n\n      // Add this cue\n      this.cues_.push(cue);\n    }\n  }\n\n  this.readyState_ = 2;\n  this.trigger('loaded');\n};\n\n\nvjs.TextTrack.prototype.parseCueTime = function(timeText) {\n  var parts = timeText.split(':'),\n      time = 0,\n      hours, minutes, other, seconds, ms;\n\n  // Check if optional hours place is included\n  // 00:00:00.000 vs. 00:00.000\n  if (parts.length == 3) {\n    hours = parts[0];\n    minutes = parts[1];\n    other = parts[2];\n  } else {\n    hours = 0;\n    minutes = parts[0];\n    other = parts[1];\n  }\n\n  // Break other (seconds, milliseconds, and flags) by spaces\n  // TODO: Make additional cue layout settings work with flags\n  other = other.split(/\\s+/);\n  // Remove seconds. Seconds is the first part before any spaces.\n  seconds = other.splice(0,1)[0];\n  // Could use either . or , for decimal\n  seconds = seconds.split(/\\.|,/);\n  // Get milliseconds\n  ms = parseFloat(seconds[1]);\n  seconds = seconds[0];\n\n  // hours => seconds\n  time += parseFloat(hours) * 3600;\n  // minutes => seconds\n  time += parseFloat(minutes) * 60;\n  // Add seconds\n  time += parseFloat(seconds);\n  // Add milliseconds\n  if (ms) { time += ms/1000; }\n\n  return time;\n};\n\n// Update active cues whenever timeupdate events are triggered on the player.\nvjs.TextTrack.prototype.update = function(){\n  if (this.cues_.length > 0) {\n\n    // Get curent player time\n    var time = this.player_.currentTime();\n\n    // Check if the new time is outside the time box created by the the last update.\n    if (this.prevChange === undefined || time < this.prevChange || this.nextChange <= time) {\n      var cues = this.cues_,\n\n          // Create a new time box for this state.\n          newNextChange = this.player_.duration(), // Start at beginning of the timeline\n          newPrevChange = 0, // Start at end\n\n          reverse = false, // Set the direction of the loop through the cues. Optimized the cue check.\n          newCues = [], // Store new active cues.\n\n          // Store where in the loop the current active cues are, to provide a smart starting point for the next loop.\n          firstActiveIndex, lastActiveIndex,\n          cue, i; // Loop vars\n\n      // Check if time is going forwards or backwards (scrubbing/rewinding)\n      // If we know the direction we can optimize the starting position and direction of the loop through the cues array.\n      if (time >= this.nextChange || this.nextChange === undefined) { // NextChange should happen\n        // Forwards, so start at the index of the first active cue and loop forward\n        i = (this.firstActiveIndex !== undefined) ? this.firstActiveIndex : 0;\n      } else {\n        // Backwards, so start at the index of the last active cue and loop backward\n        reverse = true;\n        i = (this.lastActiveIndex !== undefined) ? this.lastActiveIndex : cues.length - 1;\n      }\n\n      while (true) { // Loop until broken\n        cue = cues[i];\n\n        // Cue ended at this point\n        if (cue.endTime <= time) {\n          newPrevChange = Math.max(newPrevChange, cue.endTime);\n\n          if (cue.active) {\n            cue.active = false;\n          }\n\n          // No earlier cues should have an active start time.\n          // Nevermind. Assume first cue could have a duration the same as the video.\n          // In that case we need to loop all the way back to the beginning.\n          // if (reverse && cue.startTime) { break; }\n\n        // Cue hasn't started\n        } else if (time < cue.startTime) {\n          newNextChange = Math.min(newNextChange, cue.startTime);\n\n          if (cue.active) {\n            cue.active = false;\n          }\n\n          // No later cues should have an active start time.\n          if (!reverse) { break; }\n\n        // Cue is current\n        } else {\n\n          if (reverse) {\n            // Add cue to front of array to keep in time order\n            newCues.splice(0,0,cue);\n\n            // If in reverse, the first current cue is our lastActiveCue\n            if (lastActiveIndex === undefined) { lastActiveIndex = i; }\n            firstActiveIndex = i;\n          } else {\n            // Add cue to end of array\n            newCues.push(cue);\n\n            // If forward, the first current cue is our firstActiveIndex\n            if (firstActiveIndex === undefined) { firstActiveIndex = i; }\n            lastActiveIndex = i;\n          }\n\n          newNextChange = Math.min(newNextChange, cue.endTime);\n          newPrevChange = Math.max(newPrevChange, cue.startTime);\n\n          cue.active = true;\n        }\n\n        if (reverse) {\n          // Reverse down the array of cues, break if at first\n          if (i === 0) { break; } else { i--; }\n        } else {\n          // Walk up the array fo cues, break if at last\n          if (i === cues.length - 1) { break; } else { i++; }\n        }\n\n      }\n\n      this.activeCues_ = newCues;\n      this.nextChange = newNextChange;\n      this.prevChange = newPrevChange;\n      this.firstActiveIndex = firstActiveIndex;\n      this.lastActiveIndex = lastActiveIndex;\n\n      this.updateDisplay();\n\n      this.trigger('cuechange');\n    }\n  }\n};\n\n// Add cue HTML to display\nvjs.TextTrack.prototype.updateDisplay = function(){\n  var cues = this.activeCues_,\n      html = '',\n      i=0,j=cues.length;\n\n  for (;i<j;i++) {\n    html += '<span class=\"vjs-tt-cue\">'+cues[i].text+'</span>';\n  }\n\n  this.el_.innerHTML = html;\n};\n\n// Set all loop helper values back\nvjs.TextTrack.prototype.reset = function(){\n  this.nextChange = 0;\n  this.prevChange = this.player_.duration();\n  this.firstActiveIndex = 0;\n  this.lastActiveIndex = 0;\n};\n\n// Create specific track types\n/**\n * @constructor\n */\nvjs.CaptionsTrack = vjs.TextTrack.extend();\nvjs.CaptionsTrack.prototype.kind_ = 'captions';\n// Exporting here because Track creation requires the track kind\n// to be available on global object. e.g. new window['videojs'][Kind + 'Track']\n\n/**\n * @constructor\n */\nvjs.SubtitlesTrack = vjs.TextTrack.extend();\nvjs.SubtitlesTrack.prototype.kind_ = 'subtitles';\n\n/**\n * @constructor\n */\nvjs.ChaptersTrack = vjs.TextTrack.extend();\nvjs.ChaptersTrack.prototype.kind_ = 'chapters';\n\n\n/* Text Track Display\n============================================================================= */\n// Global container for both subtitle and captions text. Simple div container.\n\n/**\n * @constructor\n */\nvjs.TextTrackDisplay = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.Component.call(this, player, options, ready);\n\n    // This used to be called during player init, but was causing an error\n    // if a track should show by default and the display hadn't loaded yet.\n    // Should probably be moved to an external track loader when we support\n    // tracks that don't need a display.\n    if (player.options_['tracks'] && player.options_['tracks'].length > 0) {\n      this.player_.addTextTracks(player.options_['tracks']);\n    }\n  }\n});\n\nvjs.TextTrackDisplay.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-text-track-display'\n  });\n};\n\n\n/* Text Track Menu Items\n============================================================================= */\n/**\n * @constructor\n */\nvjs.TextTrackMenuItem = vjs.MenuItem.extend({\n  /** @constructor */\n  init: function(player, options){\n    var track = this.track = options['track'];\n\n    // Modify options for parent MenuItem class's init.\n    options['label'] = track.label();\n    options['selected'] = track.dflt();\n    vjs.MenuItem.call(this, player, options);\n\n    this.player_.on(track.kind() + 'trackchange', vjs.bind(this, this.update));\n  }\n});\n\nvjs.TextTrackMenuItem.prototype.onClick = function(){\n  vjs.MenuItem.prototype.onClick.call(this);\n  this.player_.showTextTrack(this.track.id_, this.track.kind());\n};\n\nvjs.TextTrackMenuItem.prototype.update = function(){\n  this.selected(this.track.mode() == 2);\n};\n\n/**\n * @constructor\n */\nvjs.OffTextTrackMenuItem = vjs.TextTrackMenuItem.extend({\n  /** @constructor */\n  init: function(player, options){\n    // Create pseudo track info\n    // Requires options['kind']\n    options['track'] = {\n      kind: function() { return options['kind']; },\n      player: player,\n      label: function(){ return options['kind'] + ' off'; },\n      dflt: function(){ return false; },\n      mode: function(){ return false; }\n    };\n    vjs.TextTrackMenuItem.call(this, player, options);\n    this.selected(true);\n  }\n});\n\nvjs.OffTextTrackMenuItem.prototype.onClick = function(){\n  vjs.TextTrackMenuItem.prototype.onClick.call(this);\n  this.player_.showTextTrack(this.track.id_, this.track.kind());\n};\n\nvjs.OffTextTrackMenuItem.prototype.update = function(){\n  var tracks = this.player_.textTracks(),\n      i=0, j=tracks.length, track,\n      off = true;\n\n  for (;i<j;i++) {\n    track = tracks[i];\n    if (track.kind() == this.track.kind() && track.mode() == 2) {\n      off = false;\n    }\n  }\n\n  this.selected(off);\n};\n\n/* Captions Button\n================================================================================ */\n/**\n * @constructor\n */\nvjs.TextTrackButton = vjs.MenuButton.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.MenuButton.call(this, player, options);\n\n    if (this.items.length <= 1) {\n      this.hide();\n    }\n  }\n});\n\n// vjs.TextTrackButton.prototype.buttonPressed = false;\n\n// vjs.TextTrackButton.prototype.createMenu = function(){\n//   var menu = new vjs.Menu(this.player_);\n\n//   // Add a title list item to the top\n//   // menu.el().appendChild(vjs.createEl('li', {\n//   //   className: 'vjs-menu-title',\n//   //   innerHTML: vjs.capitalize(this.kind_),\n//   //   tabindex: -1\n//   // }));\n\n//   this.items = this.createItems();\n\n//   // Add menu items to the menu\n//   for (var i = 0; i < this.items.length; i++) {\n//     menu.addItem(this.items[i]);\n//   }\n\n//   // Add list to element\n//   this.addChild(menu);\n\n//   return menu;\n// };\n\n// Create a menu item for each text track\nvjs.TextTrackButton.prototype.createItems = function(){\n  var items = [], track;\n\n  // Add an OFF menu item to turn all tracks off\n  items.push(new vjs.OffTextTrackMenuItem(this.player_, { 'kind': this.kind_ }));\n\n  for (var i = 0; i < this.player_.textTracks().length; i++) {\n    track = this.player_.textTracks()[i];\n    if (track.kind() === this.kind_) {\n      items.push(new vjs.TextTrackMenuItem(this.player_, {\n        'track': track\n      }));\n    }\n  }\n\n  return items;\n};\n\n/**\n * @constructor\n */\nvjs.CaptionsButton = vjs.TextTrackButton.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.TextTrackButton.call(this, player, options, ready);\n    this.el_.setAttribute('aria-label','Captions Menu');\n  }\n});\nvjs.CaptionsButton.prototype.kind_ = 'captions';\nvjs.CaptionsButton.prototype.buttonText = 'Captions';\nvjs.CaptionsButton.prototype.className = 'vjs-captions-button';\n\n/**\n * @constructor\n */\nvjs.SubtitlesButton = vjs.TextTrackButton.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.TextTrackButton.call(this, player, options, ready);\n    this.el_.setAttribute('aria-label','Subtitles Menu');\n  }\n});\nvjs.SubtitlesButton.prototype.kind_ = 'subtitles';\nvjs.SubtitlesButton.prototype.buttonText = 'Subtitles';\nvjs.SubtitlesButton.prototype.className = 'vjs-subtitles-button';\n\n// Chapters act much differently than other text tracks\n// Cues are navigation vs. other tracks of alternative languages\n/**\n * @constructor\n */\nvjs.ChaptersButton = vjs.TextTrackButton.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.TextTrackButton.call(this, player, options, ready);\n    this.el_.setAttribute('aria-label','Chapters Menu');\n  }\n});\nvjs.ChaptersButton.prototype.kind_ = 'chapters';\nvjs.ChaptersButton.prototype.buttonText = 'Chapters';\nvjs.ChaptersButton.prototype.className = 'vjs-chapters-button';\n\n// Create a menu item for each text track\nvjs.ChaptersButton.prototype.createItems = function(){\n  var items = [], track;\n\n  for (var i = 0; i < this.player_.textTracks().length; i++) {\n    track = this.player_.textTracks()[i];\n    if (track.kind() === this.kind_) {\n      items.push(new vjs.TextTrackMenuItem(this.player_, {\n        'track': track\n      }));\n    }\n  }\n\n  return items;\n};\n\nvjs.ChaptersButton.prototype.createMenu = function(){\n  var tracks = this.player_.textTracks(),\n      i = 0,\n      j = tracks.length,\n      track, chaptersTrack,\n      items = this.items = [];\n\n  for (;i<j;i++) {\n    track = tracks[i];\n    if (track.kind() == this.kind_ && track.dflt()) {\n      if (track.readyState() < 2) {\n        this.chaptersTrack = track;\n        track.on('loaded', vjs.bind(this, this.createMenu));\n        return;\n      } else {\n        chaptersTrack = track;\n        break;\n      }\n    }\n  }\n\n  var menu = this.menu = new vjs.Menu(this.player_);\n\n  menu.el_.appendChild(vjs.createEl('li', {\n    className: 'vjs-menu-title',\n    innerHTML: vjs.capitalize(this.kind_),\n    tabindex: -1\n  }));\n\n  if (chaptersTrack) {\n    var cues = chaptersTrack.cues_, cue, mi;\n    i = 0;\n    j = cues.length;\n\n    for (;i<j;i++) {\n      cue = cues[i];\n\n      mi = new vjs.ChaptersTrackMenuItem(this.player_, {\n        'track': chaptersTrack,\n        'cue': cue\n      });\n\n      items.push(mi);\n\n      menu.addChild(mi);\n    }\n  }\n\n  if (this.items.length > 0) {\n    this.show();\n  }\n\n  return menu;\n};\n\n\n/**\n * @constructor\n */\nvjs.ChaptersTrackMenuItem = vjs.MenuItem.extend({\n  /** @constructor */\n  init: function(player, options){\n    var track = this.track = options['track'],\n        cue = this.cue = options['cue'],\n        currentTime = player.currentTime();\n\n    // Modify options for parent MenuItem class's init.\n    options['label'] = cue.text;\n    options['selected'] = (cue.startTime <= currentTime && currentTime < cue.endTime);\n    vjs.MenuItem.call(this, player, options);\n\n    track.on('cuechange', vjs.bind(this, this.update));\n  }\n});\n\nvjs.ChaptersTrackMenuItem.prototype.onClick = function(){\n  vjs.MenuItem.prototype.onClick.call(this);\n  this.player_.currentTime(this.cue.startTime);\n  this.update(this.cue.startTime);\n};\n\nvjs.ChaptersTrackMenuItem.prototype.update = function(){\n  var cue = this.cue,\n      currentTime = this.player_.currentTime();\n\n  // vjs.log(currentTime, cue.startTime);\n  this.selected(cue.startTime <= currentTime && currentTime < cue.endTime);\n};\n\n// Add Buttons to controlBar\nvjs.obj.merge(vjs.ControlBar.prototype.options_['children'], {\n  'subtitlesButton': {},\n  'captionsButton': {},\n  'chaptersButton': {}\n});\n\n// vjs.Cue = vjs.Component.extend({\n//   /** @constructor */\n//   init: function(player, options){\n//     vjs.Component.call(this, player, options);\n//   }\n// });"]}